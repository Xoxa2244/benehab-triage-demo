"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/profiling/pib";
exports.ids = ["pages/api/profiling/pib"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofiling%2Fpib&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprofiling%2Fpib.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofiling%2Fpib&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprofiling%2Fpib.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_profiling_pib_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/profiling/pib.js */ \"(api)/./pages/api/profiling/pib.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_profiling_pib_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_profiling_pib_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/profiling/pib\",\n        pathname: \"/api/profiling/pib\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_profiling_pib_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2ZpbGluZyUyRnBpYiZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGcHJvZmlsaW5nJTJGcGliLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVuZWhhYi10cmlhZ2UtbmV4dC8/NjZiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3Byb2ZpbGluZy9waWIuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9maWxpbmcvcGliXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZmlsaW5nL3BpYlwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofiling%2Fpib&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprofiling%2Fpib.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/pib.js":
/*!********************!*\
  !*** ./lib/pib.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generatePIB: () => (/* binding */ generatePIB),\n/* harmony export */   loadPIBFromStorage: () => (/* binding */ loadPIBFromStorage),\n/* harmony export */   savePIBToStorage: () => (/* binding */ savePIBToStorage)\n/* harmony export */ });\n// lib/pib.js\n/**\n * Формирует Patient Instruction Bundle на основе профилей\n * @param {Object} attitude_profile - профиль отношения к болезни\n * @param {Object} accentuation_profile - типологический профиль\n * @param {Object} patient_meta - метаданные пациента\n * @returns {Object} PIB с communication_plan\n */ function generatePIB(attitude_profile, accentuation_profile, patient_meta = {}) {\n    const pib = {\n        patient_meta,\n        attitude_profile,\n        accentuation_profile,\n        communication_plan: {}\n    };\n    // Базовый communication_plan\n    const plan = {\n        tone: \"calm_supportive\",\n        session_length: \"medium\",\n        followup_hint: \"ask_in_2h\",\n        educational_focus: [],\n        avoid: [],\n        seek: []\n    };\n    // Модификаторы на основе attitude_profile\n    if (attitude_profile) {\n        const { risk_tags = [], comm_flags = [] } = attitude_profile;\n        // Обработка risk_tags\n        if (risk_tags.includes(\"alt_medicine_pref\")) {\n            plan.educational_focus.push(\"evidence_explain\", \"safety_monitor\");\n            plan.avoid.push(\"dismissive_attitude\");\n        }\n        if (risk_tags.includes(\"work_overload\")) {\n            plan.seek.push(\"work_life_balance\", \"stress_management\");\n        }\n        if (risk_tags.includes(\"depression_risk_check\")) {\n            plan.seek.push(\"mood_monitoring\", \"support_network\");\n            plan.avoid.push(\"pressure\", \"isolation\");\n        }\n        if (risk_tags.includes(\"trust_issues\")) {\n            plan.seek.push(\"build_trust\", \"transparency\");\n            plan.avoid.push(\"authoritarian_tone\");\n        }\n        if (risk_tags.includes(\"medical_avoidance\")) {\n            plan.seek.push(\"gentle_approach\", \"gradual_engagement\");\n            plan.avoid.push(\"pressure\", \"rushed_decisions\");\n        }\n        if (risk_tags.includes(\"family_conflict\")) {\n            plan.seek.push(\"family_mediation\", \"individual_support\");\n        }\n        if (risk_tags.includes(\"progression_fear\")) {\n            plan.seek.push(\"reassurance\", \"monitoring_plan\");\n            plan.avoid.push(\"alarmist_language\");\n        }\n        // Обработка comm_flags\n        if (comm_flags.includes(\"normalize_fears\")) {\n            plan.seek.push(\"normalize_experience\", \"validate_concerns\");\n        }\n        if (comm_flags.includes(\"explain_benefits\")) {\n            plan.educational_focus.push(\"benefit_explanation\", \"risk_benefit_balance\");\n        }\n        if (comm_flags.includes(\"avoid_pressure\")) {\n            plan.avoid.push(\"pressure\", \"rushed_decisions\");\n        }\n        if (comm_flags.includes(\"provide_details\")) {\n            plan.educational_focus.push(\"detailed_explanations\", \"comprehensive_info\");\n        }\n        if (comm_flags.includes(\"build_trust\")) {\n            plan.seek.push(\"trust_building\", \"consistent_approach\");\n        }\n        if (comm_flags.includes(\"family_involvement\")) {\n            plan.seek.push(\"family_engagement\", \"support_coordination\");\n        }\n    }\n    // Модификаторы на основе accentuation_profile\n    if (accentuation_profile) {\n        const { tone_mods = {} } = accentuation_profile;\n        // Применяем tone_mods\n        if (tone_mods.tone) {\n            plan.tone = tone_mods.tone;\n        }\n        if (tone_mods.session_length) {\n            plan.session_length = tone_mods.session_length;\n        }\n        if (tone_mods.avoid) {\n            plan.avoid.push(...tone_mods.avoid);\n        }\n        if (tone_mods.seek) {\n            plan.seek.push(...tone_mods.seek);\n        }\n    }\n    // Специальные правила объединения\n    if (attitude_profile && accentuation_profile) {\n        const attitude = attitude_profile;\n        const accentuation = accentuation_profile;\n        // Если sensitive или dysthymic доминируют\n        if (accentuation.dominant && (accentuation.dominant.includes(\"sensitive\") || accentuation.dominant.includes(\"dysthymic\"))) {\n            plan.tone = \"calm_supportive\";\n            plan.session_length = \"short\";\n            if (!plan.avoid.includes(\"rush\")) plan.avoid.push(\"rush\");\n            if (!plan.avoid.includes(\"pressure\")) plan.avoid.push(\"pressure\");\n        }\n        // Если pedantic доминирует\n        if (accentuation.dominant && accentuation.dominant.includes(\"pedantic\")) {\n            if (!plan.seek.includes(\"full_info\")) plan.seek.push(\"full_info\");\n            if (!plan.seek.includes(\"structure\")) plan.seek.push(\"structure\");\n        }\n        // Если есть alt_medicine_pref из attitude\n        if (attitude.risk_tags && attitude.risk_tags.includes(\"alt_medicine_pref\")) {\n            if (!plan.educational_focus.includes(\"evidence_explain\")) {\n                plan.educational_focus.push(\"evidence_explain\");\n            }\n            if (!plan.educational_focus.includes(\"safety_monitor\")) {\n                plan.educational_focus.push(\"safety_monitor\");\n            }\n        }\n        // Если есть ignore_risk из attitude\n        if (attitude.risk_tags && attitude.risk_tags.includes(\"ignore_risk\")) {\n            plan.seek.push(\"warning_signs\", \"safety_checks\");\n        }\n    }\n    // Убираем дубликаты\n    plan.avoid = [\n        ...new Set(plan.avoid)\n    ];\n    plan.seek = [\n        ...new Set(plan.seek)\n    ];\n    plan.educational_focus = [\n        ...new Set(plan.educational_focus)\n    ];\n    pib.communication_plan = plan;\n    return pib;\n}\n/**\n * Загружает PIB из localStorage\n * @returns {Object|null} PIB или null если не найден\n */ function loadPIBFromStorage() {\n    if (true) return null;\n    try {\n        const pib = localStorage.getItem(\"benehab.pib\");\n        return pib ? JSON.parse(pib) : null;\n    } catch (error) {\n        console.error(\"Ошибка загрузки PIB из localStorage:\", error);\n        return null;\n    }\n}\n/**\n * Сохраняет PIB в localStorage\n * @param {Object} pib - PIB для сохранения\n */ function savePIBToStorage(pib) {\n    if (true) return;\n    try {\n        localStorage.setItem(\"benehab.pib\", JSON.stringify(pib));\n    } catch (error) {\n        console.error(\"Ошибка сохранения PIB в localStorage:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUk7UUFDRm1CLGFBQWFPLE9BQU8sQ0FBQyxlQUFlTCxLQUFLTSxTQUFTLENBQUMzQjtJQUNyRCxFQUFFLE9BQU91QixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx5Q0FBeUNBO0lBQ3pEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZW5laGFiLXRyaWFnZS1uZXh0Ly4vbGliL3BpYi5qcz82NTFlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9waWIuanNcblxuLyoqXG4gKiDQpNC+0YDQvNC40YDRg9C10YIgUGF0aWVudCBJbnN0cnVjdGlvbiBCdW5kbGUg0L3QsCDQvtGB0L3QvtCy0LUg0L/RgNC+0YTQuNC70LXQuVxuICogQHBhcmFtIHtPYmplY3R9IGF0dGl0dWRlX3Byb2ZpbGUgLSDQv9GA0L7RhNC40LvRjCDQvtGC0L3QvtGI0LXQvdC40Y8g0Log0LHQvtC70LXQt9C90LhcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY2NlbnR1YXRpb25fcHJvZmlsZSAtINGC0LjQv9C+0LvQvtCz0LjRh9C10YHQutC40Lkg0L/RgNC+0YTQuNC70YxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXRpZW50X21ldGEgLSDQvNC10YLQsNC00LDQvdC90YvQtSDQv9Cw0YbQuNC10L3RgtCwXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBQSUIg0YEgY29tbXVuaWNhdGlvbl9wbGFuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBJQihhdHRpdHVkZV9wcm9maWxlLCBhY2NlbnR1YXRpb25fcHJvZmlsZSwgcGF0aWVudF9tZXRhID0ge30pIHtcbiAgY29uc3QgcGliID0ge1xuICAgIHBhdGllbnRfbWV0YSxcbiAgICBhdHRpdHVkZV9wcm9maWxlLFxuICAgIGFjY2VudHVhdGlvbl9wcm9maWxlLFxuICAgIGNvbW11bmljYXRpb25fcGxhbjoge31cbiAgfTtcblxuICAvLyDQkdCw0LfQvtCy0YvQuSBjb21tdW5pY2F0aW9uX3BsYW5cbiAgY29uc3QgcGxhbiA9IHtcbiAgICB0b25lOiAnY2FsbV9zdXBwb3J0aXZlJyxcbiAgICBzZXNzaW9uX2xlbmd0aDogJ21lZGl1bScsXG4gICAgZm9sbG93dXBfaGludDogJ2Fza19pbl8yaCcsXG4gICAgZWR1Y2F0aW9uYWxfZm9jdXM6IFtdLFxuICAgIGF2b2lkOiBbXSxcbiAgICBzZWVrOiBbXVxuICB9O1xuXG4gIC8vINCc0L7QtNC40YTQuNC60LDRgtC+0YDRiyDQvdCwINC+0YHQvdC+0LLQtSBhdHRpdHVkZV9wcm9maWxlXG4gIGlmIChhdHRpdHVkZV9wcm9maWxlKSB7XG4gICAgY29uc3QgeyByaXNrX3RhZ3MgPSBbXSwgY29tbV9mbGFncyA9IFtdIH0gPSBhdHRpdHVkZV9wcm9maWxlO1xuICAgIFxuICAgIC8vINCe0LHRgNCw0LHQvtGC0LrQsCByaXNrX3RhZ3NcbiAgICBpZiAocmlza190YWdzLmluY2x1ZGVzKCdhbHRfbWVkaWNpbmVfcHJlZicpKSB7XG4gICAgICBwbGFuLmVkdWNhdGlvbmFsX2ZvY3VzLnB1c2goJ2V2aWRlbmNlX2V4cGxhaW4nLCAnc2FmZXR5X21vbml0b3InKTtcbiAgICAgIHBsYW4uYXZvaWQucHVzaCgnZGlzbWlzc2l2ZV9hdHRpdHVkZScpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmlza190YWdzLmluY2x1ZGVzKCd3b3JrX292ZXJsb2FkJykpIHtcbiAgICAgIHBsYW4uc2Vlay5wdXNoKCd3b3JrX2xpZmVfYmFsYW5jZScsICdzdHJlc3NfbWFuYWdlbWVudCcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmlza190YWdzLmluY2x1ZGVzKCdkZXByZXNzaW9uX3Jpc2tfY2hlY2snKSkge1xuICAgICAgcGxhbi5zZWVrLnB1c2goJ21vb2RfbW9uaXRvcmluZycsICdzdXBwb3J0X25ldHdvcmsnKTtcbiAgICAgIHBsYW4uYXZvaWQucHVzaCgncHJlc3N1cmUnLCAnaXNvbGF0aW9uJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyaXNrX3RhZ3MuaW5jbHVkZXMoJ3RydXN0X2lzc3VlcycpKSB7XG4gICAgICBwbGFuLnNlZWsucHVzaCgnYnVpbGRfdHJ1c3QnLCAndHJhbnNwYXJlbmN5Jyk7XG4gICAgICBwbGFuLmF2b2lkLnB1c2goJ2F1dGhvcml0YXJpYW5fdG9uZScpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmlza190YWdzLmluY2x1ZGVzKCdtZWRpY2FsX2F2b2lkYW5jZScpKSB7XG4gICAgICBwbGFuLnNlZWsucHVzaCgnZ2VudGxlX2FwcHJvYWNoJywgJ2dyYWR1YWxfZW5nYWdlbWVudCcpO1xuICAgICAgcGxhbi5hdm9pZC5wdXNoKCdwcmVzc3VyZScsICdydXNoZWRfZGVjaXNpb25zJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyaXNrX3RhZ3MuaW5jbHVkZXMoJ2ZhbWlseV9jb25mbGljdCcpKSB7XG4gICAgICBwbGFuLnNlZWsucHVzaCgnZmFtaWx5X21lZGlhdGlvbicsICdpbmRpdmlkdWFsX3N1cHBvcnQnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJpc2tfdGFncy5pbmNsdWRlcygncHJvZ3Jlc3Npb25fZmVhcicpKSB7XG4gICAgICBwbGFuLnNlZWsucHVzaCgncmVhc3N1cmFuY2UnLCAnbW9uaXRvcmluZ19wbGFuJyk7XG4gICAgICBwbGFuLmF2b2lkLnB1c2goJ2FsYXJtaXN0X2xhbmd1YWdlJyk7XG4gICAgfVxuXG4gICAgLy8g0J7QsdGA0LDQsdC+0YLQutCwIGNvbW1fZmxhZ3NcbiAgICBpZiAoY29tbV9mbGFncy5pbmNsdWRlcygnbm9ybWFsaXplX2ZlYXJzJykpIHtcbiAgICAgIHBsYW4uc2Vlay5wdXNoKCdub3JtYWxpemVfZXhwZXJpZW5jZScsICd2YWxpZGF0ZV9jb25jZXJucycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tbV9mbGFncy5pbmNsdWRlcygnZXhwbGFpbl9iZW5lZml0cycpKSB7XG4gICAgICBwbGFuLmVkdWNhdGlvbmFsX2ZvY3VzLnB1c2goJ2JlbmVmaXRfZXhwbGFuYXRpb24nLCAncmlza19iZW5lZml0X2JhbGFuY2UnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbW1fZmxhZ3MuaW5jbHVkZXMoJ2F2b2lkX3ByZXNzdXJlJykpIHtcbiAgICAgIHBsYW4uYXZvaWQucHVzaCgncHJlc3N1cmUnLCAncnVzaGVkX2RlY2lzaW9ucycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tbV9mbGFncy5pbmNsdWRlcygncHJvdmlkZV9kZXRhaWxzJykpIHtcbiAgICAgIHBsYW4uZWR1Y2F0aW9uYWxfZm9jdXMucHVzaCgnZGV0YWlsZWRfZXhwbGFuYXRpb25zJywgJ2NvbXByZWhlbnNpdmVfaW5mbycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tbV9mbGFncy5pbmNsdWRlcygnYnVpbGRfdHJ1c3QnKSkge1xuICAgICAgcGxhbi5zZWVrLnB1c2goJ3RydXN0X2J1aWxkaW5nJywgJ2NvbnNpc3RlbnRfYXBwcm9hY2gnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbW1fZmxhZ3MuaW5jbHVkZXMoJ2ZhbWlseV9pbnZvbHZlbWVudCcpKSB7XG4gICAgICBwbGFuLnNlZWsucHVzaCgnZmFtaWx5X2VuZ2FnZW1lbnQnLCAnc3VwcG9ydF9jb29yZGluYXRpb24nKTtcbiAgICB9XG4gIH1cblxuICAvLyDQnNC+0LTQuNGE0LjQutCw0YLQvtGA0Ysg0L3QsCDQvtGB0L3QvtCy0LUgYWNjZW50dWF0aW9uX3Byb2ZpbGVcbiAgaWYgKGFjY2VudHVhdGlvbl9wcm9maWxlKSB7XG4gICAgY29uc3QgeyB0b25lX21vZHMgPSB7fSB9ID0gYWNjZW50dWF0aW9uX3Byb2ZpbGU7XG4gICAgXG4gICAgLy8g0J/RgNC40LzQtdC90Y/QtdC8IHRvbmVfbW9kc1xuICAgIGlmICh0b25lX21vZHMudG9uZSkge1xuICAgICAgcGxhbi50b25lID0gdG9uZV9tb2RzLnRvbmU7XG4gICAgfVxuICAgIFxuICAgIGlmICh0b25lX21vZHMuc2Vzc2lvbl9sZW5ndGgpIHtcbiAgICAgIHBsYW4uc2Vzc2lvbl9sZW5ndGggPSB0b25lX21vZHMuc2Vzc2lvbl9sZW5ndGg7XG4gICAgfVxuICAgIFxuICAgIGlmICh0b25lX21vZHMuYXZvaWQpIHtcbiAgICAgIHBsYW4uYXZvaWQucHVzaCguLi50b25lX21vZHMuYXZvaWQpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodG9uZV9tb2RzLnNlZWspIHtcbiAgICAgIHBsYW4uc2Vlay5wdXNoKC4uLnRvbmVfbW9kcy5zZWVrKTtcbiAgICB9XG4gIH1cblxuICAvLyDQodC/0LXRhtC40LDQu9GM0L3Ri9C1INC/0YDQsNCy0LjQu9CwINC+0LHRitC10LTQuNC90LXQvdC40Y9cbiAgaWYgKGF0dGl0dWRlX3Byb2ZpbGUgJiYgYWNjZW50dWF0aW9uX3Byb2ZpbGUpIHtcbiAgICBjb25zdCBhdHRpdHVkZSA9IGF0dGl0dWRlX3Byb2ZpbGU7XG4gICAgY29uc3QgYWNjZW50dWF0aW9uID0gYWNjZW50dWF0aW9uX3Byb2ZpbGU7XG4gICAgXG4gICAgLy8g0JXRgdC70Lggc2Vuc2l0aXZlINC40LvQuCBkeXN0aHltaWMg0LTQvtC80LjQvdC40YDRg9GO0YJcbiAgICBpZiAoYWNjZW50dWF0aW9uLmRvbWluYW50ICYmIFxuICAgICAgICAoYWNjZW50dWF0aW9uLmRvbWluYW50LmluY2x1ZGVzKCdzZW5zaXRpdmUnKSB8fCBcbiAgICAgICAgIGFjY2VudHVhdGlvbi5kb21pbmFudC5pbmNsdWRlcygnZHlzdGh5bWljJykpKSB7XG4gICAgICBwbGFuLnRvbmUgPSAnY2FsbV9zdXBwb3J0aXZlJztcbiAgICAgIHBsYW4uc2Vzc2lvbl9sZW5ndGggPSAnc2hvcnQnO1xuICAgICAgaWYgKCFwbGFuLmF2b2lkLmluY2x1ZGVzKCdydXNoJykpIHBsYW4uYXZvaWQucHVzaCgncnVzaCcpO1xuICAgICAgaWYgKCFwbGFuLmF2b2lkLmluY2x1ZGVzKCdwcmVzc3VyZScpKSBwbGFuLmF2b2lkLnB1c2goJ3ByZXNzdXJlJyk7XG4gICAgfVxuICAgIFxuICAgIC8vINCV0YHQu9C4IHBlZGFudGljINC00L7QvNC40L3QuNGA0YPQtdGCXG4gICAgaWYgKGFjY2VudHVhdGlvbi5kb21pbmFudCAmJiBhY2NlbnR1YXRpb24uZG9taW5hbnQuaW5jbHVkZXMoJ3BlZGFudGljJykpIHtcbiAgICAgIGlmICghcGxhbi5zZWVrLmluY2x1ZGVzKCdmdWxsX2luZm8nKSkgcGxhbi5zZWVrLnB1c2goJ2Z1bGxfaW5mbycpO1xuICAgICAgaWYgKCFwbGFuLnNlZWsuaW5jbHVkZXMoJ3N0cnVjdHVyZScpKSBwbGFuLnNlZWsucHVzaCgnc3RydWN0dXJlJyk7XG4gICAgfVxuICAgIFxuICAgIC8vINCV0YHQu9C4INC10YHRgtGMIGFsdF9tZWRpY2luZV9wcmVmINC40LcgYXR0aXR1ZGVcbiAgICBpZiAoYXR0aXR1ZGUucmlza190YWdzICYmIGF0dGl0dWRlLnJpc2tfdGFncy5pbmNsdWRlcygnYWx0X21lZGljaW5lX3ByZWYnKSkge1xuICAgICAgaWYgKCFwbGFuLmVkdWNhdGlvbmFsX2ZvY3VzLmluY2x1ZGVzKCdldmlkZW5jZV9leHBsYWluJykpIHtcbiAgICAgICAgcGxhbi5lZHVjYXRpb25hbF9mb2N1cy5wdXNoKCdldmlkZW5jZV9leHBsYWluJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXBsYW4uZWR1Y2F0aW9uYWxfZm9jdXMuaW5jbHVkZXMoJ3NhZmV0eV9tb25pdG9yJykpIHtcbiAgICAgICAgcGxhbi5lZHVjYXRpb25hbF9mb2N1cy5wdXNoKCdzYWZldHlfbW9uaXRvcicpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCBpZ25vcmVfcmlzayDQuNC3IGF0dGl0dWRlXG4gICAgaWYgKGF0dGl0dWRlLnJpc2tfdGFncyAmJiBhdHRpdHVkZS5yaXNrX3RhZ3MuaW5jbHVkZXMoJ2lnbm9yZV9yaXNrJykpIHtcbiAgICAgIHBsYW4uc2Vlay5wdXNoKCd3YXJuaW5nX3NpZ25zJywgJ3NhZmV0eV9jaGVja3MnKTtcbiAgICB9XG4gIH1cblxuICAvLyDQo9Cx0LjRgNCw0LXQvCDQtNGD0LHQu9C40LrQsNGC0YtcbiAgcGxhbi5hdm9pZCA9IFsuLi5uZXcgU2V0KHBsYW4uYXZvaWQpXTtcbiAgcGxhbi5zZWVrID0gWy4uLm5ldyBTZXQocGxhbi5zZWVrKV07XG4gIHBsYW4uZWR1Y2F0aW9uYWxfZm9jdXMgPSBbLi4ubmV3IFNldChwbGFuLmVkdWNhdGlvbmFsX2ZvY3VzKV07XG5cbiAgcGliLmNvbW11bmljYXRpb25fcGxhbiA9IHBsYW47XG4gIFxuICByZXR1cm4gcGliO1xufVxuXG4vKipcbiAqINCX0LDQs9GA0YPQttCw0LXRgiBQSUIg0LjQtyBsb2NhbFN0b3JhZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R8bnVsbH0gUElCINC40LvQuCBudWxsINC10YHQu9C4INC90LUg0L3QsNC50LTQtdC9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkUElCRnJvbVN0b3JhZ2UoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHBpYiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZW5laGFiLnBpYicpO1xuICAgIHJldHVybiBwaWIgPyBKU09OLnBhcnNlKHBpYikgOiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4IFBJQiDQuNC3IGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiDQodC+0YXRgNCw0L3Rj9C10YIgUElCINCyIGxvY2FsU3RvcmFnZVxuICogQHBhcmFtIHtPYmplY3R9IHBpYiAtIFBJQiDQtNC70Y8g0YHQvtGF0YDQsNC90LXQvdC40Y9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVQSUJUb1N0b3JhZ2UocGliKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICBcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmVuZWhhYi5waWInLCBKU09OLnN0cmluZ2lmeShwaWIpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0YHQvtGF0YDQsNC90LXQvdC40Y8gUElCINCyIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZW5lcmF0ZVBJQiIsImF0dGl0dWRlX3Byb2ZpbGUiLCJhY2NlbnR1YXRpb25fcHJvZmlsZSIsInBhdGllbnRfbWV0YSIsInBpYiIsImNvbW11bmljYXRpb25fcGxhbiIsInBsYW4iLCJ0b25lIiwic2Vzc2lvbl9sZW5ndGgiLCJmb2xsb3d1cF9oaW50IiwiZWR1Y2F0aW9uYWxfZm9jdXMiLCJhdm9pZCIsInNlZWsiLCJyaXNrX3RhZ3MiLCJjb21tX2ZsYWdzIiwiaW5jbHVkZXMiLCJwdXNoIiwidG9uZV9tb2RzIiwiYXR0aXR1ZGUiLCJhY2NlbnR1YXRpb24iLCJkb21pbmFudCIsIlNldCIsImxvYWRQSUJGcm9tU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJzYXZlUElCVG9TdG9yYWdlIiwic2V0SXRlbSIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/pib.js\n");

/***/ }),

/***/ "(api)/./pages/api/profiling/pib.js":
/*!************************************!*\
  !*** ./pages/api/profiling/pib.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_pib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/pib */ \"(api)/./lib/pib.js\");\n// pages/api/profiling/pib.js\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { attitude_profile, typology_profile, patient_meta = {} } = req.body;\n        if (!attitude_profile || !typology_profile) {\n            return res.status(400).json({\n                error: \"Необходимы оба профиля для генерации PIB\"\n            });\n        }\n        // Генерируем PIB\n        const pib = (0,_lib_pib__WEBPACK_IMPORTED_MODULE_0__.generatePIB)(attitude_profile, typology_profile, patient_meta);\n        res.status(200).json({\n            success: true,\n            pib,\n            message: \"PIB успешно сгенерирован\"\n        });\n    } catch (error) {\n        console.error(\"Ошибка генерации PIB:\", error);\n        res.status(500).json({\n            error: \"Ошибка генерации PIB\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcHJvZmlsaW5nL3BpYi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLDZCQUE2QjtBQUVrQjtBQUVoQyxlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsZ0JBQWdCLEVBQUVDLGdCQUFnQixFQUFFQyxlQUFlLENBQUMsQ0FBQyxFQUFFLEdBQUdSLElBQUlTLElBQUk7UUFFMUUsSUFBSSxDQUFDSCxvQkFBb0IsQ0FBQ0Msa0JBQWtCO1lBQzFDLE9BQU9OLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLGlCQUFpQjtRQUNqQixNQUFNSyxNQUFNWixxREFBV0EsQ0FBQ1Esa0JBQWtCQyxrQkFBa0JDO1FBRTVEUCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25CTyxTQUFTO1lBQ1REO1lBQ0FFLFNBQVM7UUFDWDtJQUNGLEVBQUUsT0FBT1AsT0FBTztRQUNkUSxRQUFRUixLQUFLLENBQUMseUJBQXlCQTtRQUN2Q0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQUyxTQUFTVCxNQUFNTyxPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2JlbmVoYWItdHJpYWdlLW5leHQvLi9wYWdlcy9hcGkvcHJvZmlsaW5nL3BpYi5qcz85MmNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9wcm9maWxpbmcvcGliLmpzXG5cbmltcG9ydCB7IGdlbmVyYXRlUElCIH0gZnJvbSAnLi4vLi4vLi4vbGliL3BpYic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBhdHRpdHVkZV9wcm9maWxlLCB0eXBvbG9neV9wcm9maWxlLCBwYXRpZW50X21ldGEgPSB7fSB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIWF0dGl0dWRlX3Byb2ZpbGUgfHwgIXR5cG9sb2d5X3Byb2ZpbGUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ9Cd0LXQvtCx0YXQvtC00LjQvNGLINC+0LHQsCDQv9GA0L7RhNC40LvRjyDQtNC70Y8g0LPQtdC90LXRgNCw0YbQuNC4IFBJQicgXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDQk9C10L3QtdGA0LjRgNGD0LXQvCBQSUJcbiAgICBjb25zdCBwaWIgPSBnZW5lcmF0ZVBJQihhdHRpdHVkZV9wcm9maWxlLCB0eXBvbG9neV9wcm9maWxlLCBwYXRpZW50X21ldGEpO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHBpYixcbiAgICAgIG1lc3NhZ2U6ICdQSUIg0YPRgdC/0LXRiNC90L4g0YHQs9C10L3QtdGA0LjRgNC+0LLQsNC9J1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDQs9C10L3QtdGA0LDRhtC40LggUElCOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgZXJyb3I6ICfQntGI0LjQsdC60LAg0LPQtdC90LXRgNCw0YbQuNC4IFBJQicsXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIFxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2VuZXJhdGVQSUIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiYXR0aXR1ZGVfcHJvZmlsZSIsInR5cG9sb2d5X3Byb2ZpbGUiLCJwYXRpZW50X21ldGEiLCJib2R5IiwicGliIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/profiling/pib.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofiling%2Fpib&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprofiling%2Fpib.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();